<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Análise Comparativa de Tabelas Hash</title>
  <meta name="description" content="Implementação e análise comparativa de soluções baseadas em hashing (C++17): listas encadeadas vs endereçamento aberto; funções hash: divisão e multiplicação." />
  <style>
    :root { --bg:#0b1220; --card:#111a2e; --muted:#a9b4c9; --text:#eaf0ff; --acc:#4da3ff; --acc2:#22c55e; }
    *{box-sizing:border-box; margin:0; padding:0}
    body{background:linear-gradient(180deg,#0b1220,#0c1426 40%,#0b1323);color:var(--text);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial}
    a{color:var(--acc);text-decoration:none}
    header{position:sticky;top:0;z-index:10;background:rgba(11,18,32,.9);backdrop-filter:blur(10px);border-bottom:1px solid #1e2a44}
    .nav{max-width:1200px;margin:auto;display:flex;gap:16px;align-items:center;justify-content:space-between;padding:12px 20px}
    .brand{display:flex;gap:10px;align-items:center}
    .brand h1{font-size:18px}
    .menu{display:flex;gap:16px;flex-wrap:wrap}
    .menu a{padding:8px 12px;border-radius:6px;transition:background .2s}
    .menu a:hover{background:rgba(77,163,255,.1)}
    .container{max-width:1200px;margin:auto;padding:30px 20px}
    .section{margin-bottom:40px;background:var(--card);border:1px solid #203052;border-radius:12px;padding:24px}
    h2{font-size:28px;margin-bottom:16px;color:#e0f2ff}
    h3{font-size:22px;margin:24px 0 12px;color:#cfe3ff}
    h4{font-size:18px;margin:20px 0 8px;color:#b8d5ff}
    .twocol{display:grid;grid-template-columns:1.2fr .8fr;gap:20px;margin-bottom:20px}
    @media (max-width:900px){.twocol{grid-template-columns:1fr}}
    .muted{color:var(--muted)}
    .tag{display:inline-block;margin:0 6px 6px 0;padding:4px 10px;border:1px solid #28436a;border-radius:20px;color:#bcd5ff;font-size:13px}
    .btn{display:inline-flex;align-items:center;gap:8px;background:linear-gradient(90deg,#2563eb,#0ea5e9);border:none;padding:8px 12px;border-radius:6px;color:#fff;font-weight:600;text-decoration:none;cursor:pointer}
    .btn-row{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0 0}
    pre{background:#0d162b;border:1px solid #1d2a49;border-radius:8px;padding:16px;overflow-x:auto;margin:12px 0}
    code{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;color:#e2e8f0}
    .chart-container{background:#0f1b35;border:1px solid #1d2a49;border-radius:8px;padding:16px;margin:16px 0}
    .chart{width:100%;height:400px !important;min-height:400px}
    .footer{border-top:1px solid #1e2a44;margin-top:40px;padding-top:20px;color:#9db0d4;text-align:center}
    .code-section{margin:20px 0}
    .code-section h4{margin-bottom:8px}
    .explanation{background:#0a1528;border-left:4px solid #4da3ff;padding:12px 16px;margin:10px 0;border-radius:0 6px 6px 0}
    ul li{margin:6px 0}
  </style>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css">
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js" data-autoloader-path="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
  <header>
    <div class="nav">
      <div class="brand">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M4 6h16M4 12h10M4 18h16" stroke="#9cc6ff" stroke-width="2" stroke-linecap="round"/></svg>
        <h1>Análise Comparativa de Tabelas Hash</h1>
      </div>
      <nav class="menu">
        <a href="#intro">Introdução</a>
        <a href="#metodologia">Metodologia</a>
        <a href="#implementacao">Implementação</a>
        <a href="#resultados">Resultados</a>
        <a href="#discussao">Discussão</a>
        <a href="#conclusao">Conclusão</a>
        <a href="https://github.com/Gabriel-Freitas-S/analise_hash" target="_blank">Repositório</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <section id="resultados" class="section">
      <h2>Resultados</h2>

      <div class="chart-container">
        <h3>Comparação de Tempo de Inserção</h3>
        <canvas id="g_insercao" class="chart"></canvas>
        <div class="btn-row">
          <button class="btn" data-download="g_insercao">Baixar PNG</button>
          <button class="btn" data-download-pdf="g_insercao">Baixar PDF</button>
          <button class="btn" data-download-csv="insercao">Baixar CSV</button>
        </div>
      </div>

      <div class="chart-container">
        <h3>Comparação de Tempo de Busca</h3>
        <canvas id="g_busca" class="chart"></canvas>
        <div class="btn-row">
          <button class="btn" data-download="g_busca">Baixar PNG</button>
          <button class="btn" data-download-pdf="g_busca">Baixar PDF</button>
          <button class="btn" data-download-csv="busca">Baixar CSV</button>
        </div>
      </div>

      <div class="chart-container">
        <h3>Comparação de Funções Hash (Inserção - Encadeada, 10.000)</h3>
        <canvas id="g_funcoes_enc" class="chart"></canvas>
        <div class="btn-row">
          <button class="btn" data-download="g_funcoes_enc">Baixar PNG</button>
          <button class="btn" data-download-pdf="g_funcoes_enc">Baixar PDF</button>
          <button class="btn" data-download-csv="funcoes_enc">Baixar CSV</button>
        </div>
      </div>

      <div class="chart-container">
        <h3>Comparação de Funções Hash (Inserção - Aberta)</h3>
        <canvas id="g_funcoes_ab" class="chart"></canvas>
        <div class="btn-row">
          <button class="btn" data-download="g_funcoes_ab">Baixar PNG</button>
          <button class="btn" data-download-pdf="g_funcoes_ab">Baixar PDF</button>
          <button class="btn" data-download-csv="funcoes_ab">Baixar CSV</button>
        </div>
      </div>

      <div class="chart-container">
        <h3>Relação Fator de Carga × Colisões (Encadeadas)</h3>
        <canvas id="g_carga_colisao" class="chart"></canvas>
        <div class="btn-row">
          <button class="btn" data-download="g_carga_colisao">Baixar PNG</button>
          <button class="btn" data-download-pdf="g_carga_colisao">Baixar PDF</button>
          <button class="btn" data-download-csv="carga_colisao">Baixar CSV</button>
        </div>
      </div>

      <div class="chart-container">
        <h3>Tabela Aberta: Heurística de Sondagens × Fator de Carga</h3>
        <canvas id="g_aberta_cluster" class="chart"></canvas>
        <div class="btn-row">
          <button class="btn" data-download="g_aberta_cluster">Baixar PNG</button>
          <button class="btn" data-download-pdf="g_aberta_cluster">Baixar PDF</button>
          <button class="btn" data-download-csv="aberta_cluster">Baixar CSV</button>
        </div>
      </div>
    </section>
  </main>

  <script>
  // Utilidades de download
  function baixarPNG(canvasId) {
    const canvas = document.getElementById(canvasId);
    const url = canvas.toDataURL('image/png');
    const a = document.createElement('a');
    a.href = url; a.download = canvasId + '.png'; a.click();
  }
  function baixarPDF(canvasId) {
    const canvas = document.getElementById(canvasId);
    // PDF simples via imagem (compatível com Pages sem libs externas)
    const img = canvas.toDataURL('image/png');
    const w = window.open('', '_blank');
    w.document.write('<html><head><title>'+canvasId+'</title></head><body style="margin:0">');
    w.document.write('<img src="'+img+'" style="width:100%" />');
    w.document.write('</body></html>');
    w.document.close();
    w.focus();
    // Usuário pode usar imprimir como PDF
  }
  function baixarCSV(nome, linhas) {
    const csv = linhas.map(arr => arr.map(v => (typeof v==='string' && v.includes(','))?`"${v}"`:v).join(',')).join('\n');
    const blob = new Blob([csv], {type:'text/csv;charset=utf-8;'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = nome + '.csv'; a.click();
    URL.revokeObjectURL(url);
  }

  document.addEventListener('click', (e)=>{
    const btn = e.target.closest('[data-download]');
    if (btn) { baixarPNG(btn.getAttribute('data-download')); }
    const btnPdf = e.target.closest('[data-download-pdf]');
    if (btnPdf) { baixarPDF(btnPdf.getAttribute('data-download-pdf')); }
  });

  // CSV inline (fallback)
  const CSV_INLINE = `TipoTabela,TamanhoTabela,QuantidadeDados,FuncaoHash,TempoInsercao(ms),TempoBusca(ms),Colisoes,FatorCarga
Encadeada,29,100,Divisao,0.010,0.018,71,3.4483
Encadeada,29,100,Multiplicacao,0.009,0.028,71,3.4483
Encadeada,97,100,Divisao,0.008,0.014,37,1.0309
Encadeada,97,100,Multiplicacao,0.008,0.023,37,1.0309
Encadeada,251,100,Divisao,0.006,0.014,0,0.3984
Encadeada,251,100,Multiplicacao,0.005,0.013,0,0.3984
Encadeada,499,100,Divisao,0.009,0.007,0,0.2004
Encadeada,499,100,Multiplicacao,0.006,0.012,0,0.2004
Encadeada,911,100,Divisao,0.007,0.005,0,0.1098
Encadeada,911,100,Multiplicacao,0.006,0.010,0,0.1098
Aberta,50009,100,Divisao,0.012,0.005,0,0.0020
Aberta,50009,100,Multiplicacao,0.001,0.007,0,0.0020
Encadeada,29,500,Divisao,0.044,0.035,470,17.2069
Encadeada,29,500,Multiplicacao,0.051,0.048,470,17.2069
Encadeada,97,500,Divisao,0.060,0.031,402,5.1443
Encadeada,97,500,Multiplicacao,0.060,0.047,402,5.1443
Encadeada,251,500,Divisao,0.027,0.013,282,1.9880
Encadeada,251,500,Multiplicacao,0.041,0.023,282,1.9880
Encadeada,499,500,Divisao,0.026,0.011,0,1.0000
Encadeada,499,500,Multiplicacao,0.026,0.019,0,1.0000
Encadeada,911,500,Divisao,0.029,0.010,0,0.5477
Encadeada,911,500,Multiplicacao,0.030,0.016,0,0.5477
Aberta,50009,499,Divisao,0.004,0.004,2,0.0100
Aberta,50009,499,Multiplicacao,0.007,0.009,2,0.0100
Encadeada,29,1000,Divisao,0.099,0.054,971,34.4828
Encadeada,29,1000,Multiplicacao,0.077,0.070,971,34.4828
Encadeada,97,1000,Divisao,0.070,0.030,903,10.3093
Encadeada,97,1000,Multiplicacao,0.101,0.045,903,10.3093
Encadeada,251,1000,Divisao,0.063,0.017,753,3.9841
Encadeada,251,1000,Multiplicacao,0.067,0.025,753,3.9841
Encadeada,499,1000,Divisao,0.065,0.016,568,2.0040
Encadeada,499,1000,Multiplicacao,0.080,0.034,568,2.0040
Encadeada,911,1000,Divisao,0.039,0.011,392,1.0977
Encadeada,911,1000,Multiplicacao,0.046,0.021,392,1.0977
Aberta,50009,1000,Divisao,0.004,0.002,9,0.0200
Aberta,50009,1000,Multiplicacao,0.015,0.005,9,0.0200
Encadeada,29,5000,Divisao,1.996,0.782,4958,171.9655
Encadeada,29,5000,Multiplicacao,1.802,0.709,4958,171.9655
Encadeada,97,5000,Divisao,0.757,0.252,4890,51.4124
Encadeada,97,5000,Multiplicacao,0.780,0.228,4890,51.4124
Encadeada,251,5000,Divisao,0.446,0.076,4736,19.8685
Encadeada,251,5000,Multiplicacao,0.501,0.084,4736,19.8685
Encadeada,499,5000,Divisao,0.360,0.039,4488,9.9940
Encadeada,499,5000,Multiplicacao,0.422,0.050,4488,9.9940
Encadeada,911,5000,Divisao,0.311,0.027,4079,5.4742
Encadeada,911,5000,Multiplicacao,0.351,0.042,4079,5.4742
Aberta,50009,4987,Divisao,0.050,0.005,248,0.0997
Aberta,50009,4987,Multiplicacao,0.164,0.013,248,0.0997
Encadeada,29,10000,Divisao,10.647,1.779,9922,343.1379
Encadeada,29,10000,Multiplicacao,9.404,1.932,9922,343.1379
Encadeada,97,10000,Divisao,3.794,1.424,9854,102.5876
Encadeada,97,10000,Multiplicacao,3.483,0.541,9854,102.5876
Encadeada,251,10000,Divisao,1.358,0.195,9700,39.6454
Encadeada,251,10000,Multiplicacao,1.445,0.205,9700,39.6454
Encadeada,499,10000,Divisao,0.896,0.080,9452,19.9419
Encadeada,499,10000,Multiplicacao,0.931,0.078,9452,19.9419
Encadeada,911,10000,Divisao,0.647,0.038,9040,10.9232
Encadeada,911,10000,Multiplicacao,0.978,0.048,9040,10.9232
Aberta,50009,9951,Divisao,0.054,0.006,990,0.1990
Aberta,50009,9951,Multiplicacao,0.087,0.009,990,0.1990
Encadeada,29,50000,Divisao,249.355,10.696,48723,1681.1034
Encadeada,29,50000,Multiplicacao,216.560,10.778,48723,1681.1034
Encadeada,97,50000,Divisao,73.418,3.616,48655,502.5979
Encadeada,97,50000,Multiplicacao,75.745,3.505,48655,502.5979
Encadeada,251,50000,Divisao,33.389,2.266,48501,194.2311
Encadeada,251,50000,Multiplicacao,37.609,1.819,48501,194.2311
Encadeada,499,50000,Divisao,19.196,0.810,48253,97.6994
Encadeada,499,50000,Multiplicacao,20.494,0.681,48253,97.6994
Encadeada,911,50000,Divisao,11.557,0.389,47841,53.5148
Encadeada,911,50000,Multiplicacao,11.549,0.468,47841,53.5148
Aberta,50009,25005,Divisao,0.324,0.016,6251,0.5000
Aberta,50009,25005,Multiplicacao,0.355,0.024,6251,0.5000`;

  async function carregarCSV(){
    try {
      const resp = await fetch('resultados_benchmark.csv', {cache:'no-store'});
      if (!resp.ok) throw new Error('fetch falhou');
      const text = await resp.text();
      if (!text || text.indexOf('TipoTabela') !== 0) throw new Error('conteúdo inesperado');
      return parseCSV(text);
    } catch (e) {
      return parseCSV(CSV_INLINE);
    }
  }

  function parseCSV(text){
    const linhas = text.trim().split(/\r?\n/);
    const cab = linhas.shift().split(',');
    return linhas.map(l => {
      const c = l.split(',');
      return {TipoTabela:c[0], TamanhoTabela:+c[1], QuantidadeDados:+c[2], FuncaoHash:c[3], TempoInsercao:+c[4], TempoBusca:+c[5], Colisoes:+c[6], FatorCarga:+c[7]};
    });
  }

  // Monta CSVs derivados para download
  function csvInsercao(dados, gruposQD){
    const header = ['QuantidadeDados','Encadeada(ms)','Aberta(ms)'];
    const rows = gruposQD.map(q=>{
      const enc = avg(dados.filter(d=>d.QuantidadeDados===q && d.TipoTabela==='Encadeada'), 'TempoInsercao');
      const ab  = avg(dados.filter(d=>d.QuantidadeDados===q && d.TipoTabela==='Aberta'),     'TempoInsercao');
      return [q, enc.toFixed(3), ab.toFixed(3)];
    });
    return [header, ...rows];
  }
  function csvBusca(dados, gruposQD){
    const header = ['QuantidadeDados','Encadeada(ms)','Aberta(ms)'];
    const rows = gruposQD.map(q=>{
      const enc = avg(dados.filter(d=>d.QuantidadeDados===q && d.TipoTabela==='Encadeada'), 'TempoBusca');
      const ab  = avg(dados.filter(d=>d.QuantidadeDados===q && d.TipoTabela==='Aberta'),     'TempoBusca');
      return [q, enc.toFixed(3), ab.toFixed(3)];
    });
    return [header, ...rows];
  }
  function csvFuncoesEnc(dados, tamanhos){
    const alvo = 10000; const enc10k = dados.filter(d=>d.TipoTabela==='Encadeada' && d.QuantidadeDados===alvo);
    const header = ['TamanhoTabela','Divisao(ms)','Multiplicacao(ms)'];
    const rows = tamanhos.map(t=>{
      const dv = enc10k.find(d=>d.TamanhoTabela===t && d.FuncaoHash==='Divisao')?.TempoInsercao ?? 0;
      const mp = enc10k.find(d=>d.TamanhoTabela===t && d.FuncaoHash==='Multiplicacao')?.TempoInsercao ?? 0;
      return [t, dv.toFixed(3), mp.toFixed(3)];
    });
    return [header, ...rows];
  }
  function csvFuncoesAb(dados){
    const ab = dados.filter(d=>d.TipoTabela==='Aberta');
    const header = ['QuantidadeDados','Divisao(ms)','Multiplicacao(ms)','FatorCarga'];
    const rows = ab.map(d=>[d.QuantidadeDados, d.TempoInsercao.toFixed(3), d.TempoBusca.toFixed(3), d.FatorCarga.toFixed(4)]);
    return [header, ...rows];
  }
  function csvCargaColisao(dados){
    const enc = dados.filter(d=>d.TipoTabela==='Encadeada');
    const header = ['FatorCarga','Colisoes'];
    const rows = enc.map(d=>[d.FatorCarga.toFixed(4), d.Colisoes]);
    return [header, ...rows];
  }
  function csvAbertaCluster(dados){
    const ab = dados.filter(d=>d.TipoTabela==='Aberta');
    const header = ['FatorCarga','SondagensEstimadas'];
    const rows = [...new Map(ab.map(d=>[d.FatorCarga, d])).values()]
      .sort((a,b)=>a.FatorCarga-b.FatorCarga)
      .map(d=>[d.FatorCarga.toFixed(4), (1/(1-d.FatorCarga)).toFixed(3)]);
    return [header, ...rows];
  }
  function avg(arr, key){
    if (!arr.length) return 0; return arr.reduce((s,x)=>s+x[key],0)/arr.length;
  }

  document.addEventListener('click', (e)=>{
    const csvg = e.target.closest('[data-download-csv]');
    if (!csvg) return;
    const tipo = csvg.getAttribute('data-download-csv');
    if (!window.__dadosCsv) return;
    const {dados, gruposQD, tamanhos} = window.__dadosCsv;
    switch(tipo){
      case 'insercao': return baixarCSV('grafico_insercao', csvInsercao(dados, gruposQD));
      case 'busca': return baixarCSV('grafico_busca', csvBusca(dados, gruposQD));
      case 'funcoes_enc': return baixarCSV('grafico_funcoes_enc', csvFuncoesEnc(dados, tamanhos));
      case 'funcoes_ab': return baixarCSV('grafico_funcoes_ab', csvFuncoesAb(dados));
      case 'carga_colisao': return baixarCSV('grafico_carga_colisoes', csvCargaColisao(dados));
      case 'aberta_cluster': return baixarCSV('grafico_aberta_cluster', csvAbertaCluster(dados));
    }
  });

  // Renderização dos gráficos
  (async ()=>{
    const dados = await carregarCSV();
    const gruposQD = [...new Set(dados.map(d=>d.QuantidadeDados))].sort((a,b)=>a-b);
    const tamanhos = [29,97,251,499,911];
    window.__dadosCsv = {dados, gruposQD, tamanhos};

    const media = (tipo, campo) => gruposQD.map(q=>{
      const subset = dados.filter(d=>d.QuantidadeDados===q && d.TipoTabela===tipo);
      return subset.length ? subset.reduce((s,x)=>s+x[campo],0)/subset.length : 0;
    });

    // Inserção
    new Chart(document.getElementById('g_insercao').getContext('2d'), {
      type:'line', data:{ datasets:[
        {label:'Tabela Encadeada', data:gruposQD.map((x,i)=>({x, y: media('Encadeada','TempoInsercao')[i]})), borderColor:'#60a5fa', backgroundColor:'#60a5fa33', tension:.2},
        {label:'Tabela Aberta',    data:gruposQD.map((x,i)=>({x, y: media('Aberta','TempoInsercao')[i]})),    borderColor:'#34d399', backgroundColor:'#34d39933', tension:.2}
      ]}, options:{responsive:true, maintainAspectRatio:false, plugins:{title:{display:true,text:'Comparação de Tempo de Inserção'}, legend:{labels:{color:'#dbeafe'}}}, scales:{x:{title:{display:true,text:'Quantidade de Dados'}}, y:{title:{display:true,text:'Tempo de Inserção (ms)'}}}}
    });

    // Busca
    new Chart(document.getElementById('g_busca').getContext('2d'), {
      type:'line', data:{ datasets:[
        {label:'Tabela Encadeada', data:gruposQD.map((x,i)=>({x, y: media('Encadeada','TempoBusca')[i]})), borderColor:'#06b6d4', backgroundColor:'#06b6d433', tension:.2},
        {label:'Tabela Aberta',    data:gruposQD.map((x,i)=>({x, y: media('Aberta','TempoBusca')[i]})),    borderColor:'#a78bfa', backgroundColor:'#a78bfa33', tension:.2}
      ]}, options:{responsive:true, maintainAspectRatio:false, plugins:{title:{display:true,text:'Comparação de Tempo de Busca'}, legend:{labels:{color:'#dbeafe'}}}, scales:{x:{title:{display:true,text:'Quantidade de Dados'}}, y:{title:{display:true,text:'Tempo de Busca (ms)'}}}}
    });

    // Funções Encadeada @10k
    const enc10k = dados.filter(d=>d.TipoTabela==='Encadeada' && d.QuantidadeDados===10000);
    const divs = tamanhos.map(t=> enc10k.find(d=>d.TamanhoTabela===t && d.FuncaoHash==='Divisao')?.TempoInsercao ?? 0);
    const mult = tamanhos.map(t=> enc10k.find(d=>d.TamanhoTabela===t && d.FuncaoHash==='Multiplicacao')?.TempoInsercao ?? 0);
    new Chart(document.getElementById('g_funcoes_enc').getContext('2d'), {
      type:'bar', data:{ labels:tamanhos.map(String), datasets:[
        {label:'Função Divisão', data:divs, backgroundColor:'#60a5fa'},
        {label:'Função Multiplicação', data:mult, backgroundColor:'#34d399'}
      ]}, options:{responsive:true, maintainAspectRatio:false, plugins:{title:{display:true,text:'Comparação de Funções Hash (10.000 - Encadeada)'}}, scales:{x:{title:{display:true,text:'Tamanho da Tabela'}}, y:{title:{display:true,text:'Tempo de Inserção (ms)'}}}}
    });

    // Funções Aberta
    const aberta = dados.filter(d=>d.TipoTabela==='Aberta');
    const gruposAb = [...new Set(aberta.map(d=>d.QuantidadeDados))].sort((a,b)=>a-b);
    const divAb = gruposAb.map(q=> aberta.find(d=>d.QuantidadeDados===q && d.FuncaoHash==='Divisao')?.TempoInsercao ?? 0);
    const mulAb = gruposAb.map(q=> aberta.find(d=>d.QuantidadeDados===q && d.FuncaoHash==='Multiplicacao')?.TempoInsercao ?? 0);
    new Chart(document.getElementById('g_funcoes_ab').getContext('2d'), {
      type:'bar', data:{ labels:gruposAb.map(String), datasets:[
        {label:'Divisão (ms)', data:divAb, backgroundColor:'#60a5fa'},
        {label:'Multiplicação (ms)', data:mulAb, backgroundColor:'#34d399'}
      ]}, options:{responsive:true, maintainAspectRatio:false, plugins:{title:{display:true,text:'Funções Hash na Tabela Aberta (por quantidade de dados)'}}, scales:{x:{title:{display:true,text:'Quantidade de Dados'}}, y:{title:{display:true,text:'Tempo de Inserção (ms)'}}}}
    });

    // Dispersão Encadeada
    const pontosEnc = dados.filter(d=>d.TipoTabela==='Encadeada').map(d=>({x:+d.FatorCarga.toFixed(4), y:d.Colisoes}));
    new Chart(document.getElementById('g_carga_colisao').getContext('2d'), {
      type:'scatter', data:{ datasets:[{label:'Encadeada', data:pontosEnc, backgroundColor:'#f59e0b'}]}, options:{responsive:true, maintainAspectRatio:false, plugins:{title:{display:true,text:'Relação Fator de Carga × Colisões (Encadeadas)'}}, scales:{x:{title:{display:true,text:'Fator de Carga'}}, y:{title:{display:true,text:'Número de Colisões'}}}}
    });

    // Aberta: Sondagens estimadas por fator de carga
    const porCarga = [...new Map(aberta.map(d=>[d.FatorCarga, d])).values()].sort((a,b)=>a.FatorCarga-b.FatorCarga);
    const labelsCarga = porCarga.map(d=>+d.FatorCarga.toFixed(3));
    const sond = porCarga.map(d=> +(1/(1-d.FatorCarga)).toFixed(3));
    new Chart(document.getElementById('g_aberta_cluster').getContext('2d'), {
      type:'bar', data:{ labels:labelsCarga, datasets:[{label:'Sondagens (estim.)', data:sond, backgroundColor:'#f59e0b'}]}, options:{responsive:true, maintainAspectRatio:false, plugins:{title:{display:true,text:'Tabela Aberta: Heurística de Sondagens × Fator de Carga'}}, scales:{x:{title:{display:true,text:'Fator de Carga'}}, y:{title:{display:true,text:'Sondagens Médias (estim.)'}}}}
    });
  })();
  </script>
</body>
</html>