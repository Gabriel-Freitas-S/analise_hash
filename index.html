<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trabalho 2: Análise de Tabela Hash</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>body{font-family:'Inter',sans-serif;scroll-behavior:smooth}.code-block{background-color:#1f2937;color:#d1d5db;padding:1rem;border-radius:.5rem;overflow-x:auto;font-family:'Courier New',Courier,monospace;font-size:.875rem}.code-block .keyword{color:#93c5fd}.code-block .type{color:#6ee7b7}.code-block .comment{color:#6b7280}.code-block .string{color:#fde047}.code-block .number{color:#f9a8d4}.code-block .preprocessor{color:#d8b4fe}.chart-container{position:relative;height:50vh;width:100%}details>summary{cursor:pointer;font-weight:600;padding:.75rem 1rem;background-color:#f3f4f6;border-radius:.375rem;transition:background-color .2s;display:flex;justify-content:space-between;align-items:center}details>summary:hover{background-color:#e5e7eb}details[open]>summary{background-color:#e5e7eb;border-bottom-left-radius:0;border-bottom-right-radius:0}details>summary::after{content:'▼';font-size:.8rem;transition:transform .2s}details[open]>summary::after{transform:rotate(180deg)}.details-content{padding:1.5rem;border:1px solid #e5e7eb;border-top:none;border-radius:0 0 .5rem .5rem}
    </style>
</head>
<body class="bg-gray-100 text-gray-800">
    <header class="bg-white shadow-md">
        <div class="container mx-auto px-6 py-4">
            <h1 class="text-3xl font-bold text-gray-900">Análise Comparativa de Soluções Baseadas em Hashing</h1>
            <p class="text-lg text-gray-600 mt-1">Disciplina: Pesquisa e Ordenação - Trabalho 2</p>
            <div class="mt-2 flex items-center text-sm text-gray-500">
                <span class="bg-green-100 text-green-800 px-2 py-1 rounded-md font-medium">Versão 1.1.0 - Corrigido e Verificado</span>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-6 py-8">
        <!-- (conteúdo anterior preservado) -->

        <section id="graficos" class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-2xl font-semibold mb-4 border-b pb-2">Resultados e Gráficos</h2>
            <p class="mb-6 text-gray-700">Os gráficos abaixo refletem os dados do arquivo <code>resultados_benchmark.csv</code> atualizado.</p>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8 p-4 bg-gray-50 rounded-lg border">
                <div>
                    <label for="chartType" class="block text-sm font-medium text-gray-700">Métrica de Análise:</label>
                    <select id="chartType" class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                        <option value="insertion" selected>Tempo de Inserção (ms)</option>
                        <option value="search">Tempo de Busca (ms)</option>
                        <option value="collisions">Colisões</option>
                    </select>
                </div>
                <div>
                    <label for="tableType" class="block text-sm font-medium text-gray-700">Tipo de Tabela Hash:</label>
                    <select id="tableType" class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                        <option value="all" selected>Ambas (Comparativo)</option>
                        <option value="Encadeada">Encadeada</option>
                        <option value="Aberta">Aberta</option>
                    </select>
                </div>
                 <div>
                    <label for="hashFunction" class="block text-sm font-medium text-gray-700">Função de Hash:</label>
                    <select id="hashFunction" class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                        <option value="all" selected>Ambas (Comparativo)</option>
                        <option value="Divisao">Divisão</option>
                        <option value="Multiplicacao">Multiplicação</option>
                    </select>
                </div>
            </div>

            <div class="chart-container">
                <canvas id="benchmarkChart"></canvas>
            </div>
            <div class="text-center mt-4">
                <button id="downloadChartBtn" class="bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-300">Baixar Gráfico</button>
            </div>
        </section>
    </main>

    <footer class="bg-white mt-12">
        <div class="container mx-auto px-6 py-4 text-center text-gray-500">
            <p>Desenvolvido para a disciplina de Pesquisa e Ordenação - Trabalho 2</p>
            <p class="text-sm mt-1">Versão 1.1.0 - c = 0.63274838</p>
        </div>
    </footer>

    <script>
        // CSV embutido a partir do resultados_benchmark.csv atualizado
        const csvData = `TipoTabela,TamanhoTabela,QuantidadeDados,FuncaoHash,TempoInsercao(ms),TempoBusca(ms),Colisoes,FatorCarga\nEncadeada,29,100,Divisao,0.010,0.018,71,3.4483\nEncadeada,29,100,Multiplicacao,0.009,0.028,71,3.4483\nEncadeada,97,100,Divisao,0.008,0.014,37,1.0309\nEncadeada,97,100,Multiplicacao,0.008,0.023,37,1.0309\nEncadeada,251,100,Divisao,0.006,0.014,0,0.3984\nEncadeada,251,100,Multiplicacao,0.005,0.013,0,0.3984\nEncadeada,499,100,Divisao,0.009,0.007,0,0.2004\nEncadeada,499,100,Multiplicacao,0.006,0.012,0,0.2004\nEncadeada,911,100,Divisao,0.007,0.005,0,0.1098\nEncadeada,911,100,Multiplicacao,0.006,0.010,0,0.1098\nAberta,50009,100,Divisao,0.012,0.005,0,0.0020\nAberta,50009,100,Multiplicacao,0.001,0.007,0,0.0020\nEncadeada,29,500,Divisao,0.044,0.035,470,17.2069\nEncadeada,29,500,Multiplicacao,0.051,0.048,470,17.2069\nEncadeada,97,500,Divisao,0.060,0.031,402,5.1443\nEncadeada,97,500,Multiplicacao,0.060,0.047,402,5.1443\nEncadeada,251,500,Divisao,0.027,0.013,282,1.9880\nEncadeada,251,500,Multiplicacao,0.041,0.023,282,1.9880\nEncadeada,499,500,Divisao,0.026,0.011,0,1.0000\nEncadeada,499,500,Multiplicacao,0.026,0.019,0,1.0000\nEncadeada,911,500,Divisao,0.029,0.010,0,0.5477\nEncadeada,911,500,Multiplicacao,0.030,0.016,0,0.5477\nAberta,50009,499,Divisao,0.004,0.004,2,0.0100\nAberta,50009,499,Multiplicacao,0.007,0.009,2,0.0100\nEncadeada,29,1000,Divisao,0.099,0.054,971,34.4828\nEncadeada,29,1000,Multiplicacao,0.077,0.070,971,34.4828\nEncadeada,97,1000,Divisao,0.070,0.030,903,10.3093\nEncadeada,97,1000,Multiplicacao,0.101,0.045,903,10.3093\nEncadeada,251,1000,Divisao,0.063,0.017,753,3.9841\nEncadeada,251,1000,Multiplicacao,0.067,0.025,753,3.9841\nEncadeada,499,1000,Divisao,0.065,0.016,568,2.0040\nEncadeada,499,1000,Multiplicacao,0.080,0.034,568,2.0040\nEncadeada,911,1000,Divisao,0.039,0.011,392,1.0977\nEncadeada,911,1000,Multiplicacao,0.046,0.021,392,1.0977\nAberta,50009,1000,Divisao,0.004,0.002,9,0.0200\nAberta,50009,1000,Multiplicacao,0.015,0.005,9,0.0200\nEncadeada,29,5000,Divisao,1.996,0.782,4958,171.9655\nEncadeada,29,5000,Multiplicacao,1.802,0.709,4958,171.9655\nEncadeada,97,5000,Divisao,0.757,0.252,4890,51.4124\nEncadeada,97,5000,Multiplicacao,0.780,0.228,4890,51.4124\nEncadeada,251,5000,Divisao,0.446,0.076,4736,19.8685\nEncadeada,251,5000,Multiplicacao,0.501,0.084,4736,19.8685\nEncadeada,499,5000,Divisao,0.360,0.039,4488,9.9940\nEncadeada,499,5000,Multiplicacao,0.422,0.050,4488,9.9940\nEncadeada,911,5000,Divisao,0.311,0.027,4079,5.4742\nEncadeada,911,5000,Multiplicacao,0.351,0.042,4079,5.4742\nAberta,50009,4987,Divisao,0.050,0.005,248,0.0997\nAberta,50009,4987,Multiplicacao,0.164,0.013,248,0.0997\nEncadeada,29,10000,Divisao,10.647,1.779,9922,343.1379\nEncadeada,29,10000,Multiplicacao,9.404,1.932,9922,343.1379\nEncadeada,97,10000,Divisao,3.794,1.424,9854,102.5876\nEncadeada,97,10000,Multiplicacao,3.483,0.541,9854,102.5876\nEncadeada,251,10000,Divisao,1.358,0.195,9700,39.6454\nEncadeada,251,10000,Multiplicacao,1.445,0.205,9700,39.6454\nEncadeada,499,10000,Divisao,0.896,0.080,9452,19.9419\nEncadeada,499,10000,Multiplicacao,0.931,0.078,9452,19.9419\nEncadeada,911,10000,Divisao,0.647,0.038,9040,10.9232\nEncadeada,911,10000,Multiplicacao,0.978,0.048,9040,10.9232\nAberta,50009,9951,Divisao,0.054,0.006,990,0.1990\nAberta,50009,9951,Multiplicacao,0.087,0.009,990,0.1990\nEncadeada,29,50000,Divisao,249.355,10.696,48723,1681.1034\nEncadeada,29,50000,Multiplicacao,216.560,10.778,48723,1681.1034\nEncadeada,97,50000,Divisao,73.418,3.616,48655,502.5979\nEncadeada,97,50000,Multiplicacao,75.745,3.505,48655,502.5979\nEncadeada,251,50000,Divisao,33.389,2.266,48501,194.2311\nEncadeada,251,50000,Multiplicacao,37.609,1.819,48501,194.2311\nEncadeada,499,50000,Divisao,19.196,0.810,48253,97.6994\nEncadeada,499,50000,Multiplicacao,20.494,0.681,48253,97.6994\nEncadeada,911,50000,Divisao,11.557,0.389,47841,53.5148\nEncadeada,911,50000,Multiplicacao,11.549,0.468,47841,53.5148\nAberta,50009,25005,Divisao,0.324,0.016,6251,0.5000\nAberta,50009,25005,Multiplicacao,0.355,0.024,6251,0.5000`;

        function parseCSV(data){const lines=data.trim().split('\n');const headers=lines[0].split(',');return lines.slice(1).map(line=>{const values=line.split(',');const entry={};headers.forEach((h,i)=>{const v=values[i];entry[h]=isNaN(parseFloat(v))?v:parseFloat(v)});return entry})}
        const benchmarkData=parseCSV(csvData);let myChart;
        const chartConfig={insertion:{label:'Tempo de Inserção (ms)',key:'TempoInsercao(ms)',yAxisLabel:'Tempo (ms)'},search:{label:'Tempo de Busca (ms)',key:'TempoBusca(ms)',yAxisLabel:'Tempo (ms)'},collisions:{label:'Colisões',key:'Colisoes',yAxisLabel:'Número de Colisões'}};
        const colors={'Encadeada-Divisao':'rgba(54, 162, 235, 1)','Encadeada-Multiplicacao':'rgba(255, 99, 132, 1)','Aberta-Divisao':'rgba(75, 192, 192, 1)','Aberta-Multiplicacao':'rgba(255, 206, 86, 1)'};
        const borderColors={'Encadeada-Divisao':'rgba(54, 162, 235, 1)','Encadeada-Multiplicacao':'rgba(255, 99, 132, 1)','Aberta-Divisao':'rgba(75, 192, 192, 1)','Aberta-Multiplicacao':'rgba(255, 206, 86, 1)'};

        function updateChart(){const chartType=document.getElementById('chartType').value;const tableType=document.getElementById('tableType').value;const hashFunction=document.getElementById('hashFunction').value;const selectedConfig=chartConfig[chartType];let filteredData=benchmarkData;if(tableType!=='all'){filteredData=filteredData.filter(d=>d.TipoTabela===tableType)}if(hashFunction!=='all'){filteredData=filteredData.filter(d=>d.FuncaoHash===hashFunction)}const labels=[...new Set(filteredData.map(d=>d.QuantidadeDados))].sort((a,b)=>a-b);const datasets=[];const combinations=[...new Set(filteredData.map(d=>`${d.TipoTabela}-${d.FuncaoHash}`))];combinations.forEach(combo=>{const[tipo,hash]=combo.split('-');const dataForCombo=filteredData.filter(d=>d.TipoTabela===tipo&&d.FuncaoHash===hash);const dataPoints=labels.map(label=>{const points=dataForCombo.filter(d=>d.QuantidadeDados===label).map(d=>d[selectedConfig.key]);return points.length>0?points.reduce((a,b)=>a+b,0)/points.length:null});datasets.push({label:`${tipo} - ${hash}`,data:dataPoints,borderColor:borderColors[combo],backgroundColor:colors[combo].replace('1)','0.2)'),fill:false,tension:0.1})});const ctx=document.getElementById('benchmarkChart').getContext('2d');if(myChart){myChart.destroy()}myChart=new Chart(ctx,{type:'line',data:{labels:labels,datasets:datasets},options:{responsive:true,maintainAspectRatio:false,plugins:{title:{display:true,text:`${selectedConfig.label} vs. Quantidade de Dados (c = 0.63274838)`,font:{size:18}},legend:{position:'top'}},scales:{x:{display:true,title:{display:true,text:'Quantidade de Dados Inseridos'}},y:{display:true,title:{display:true,text:selectedConfig.yAxisLabel},type:'logarithmic',ticks:{callback:function(value){if(value>=1000){return value.toExponential()}return Number(value.toString())}}}}}})}
        document.getElementById('chartType').addEventListener('change',updateChart);
        document.getElementById('tableType').addEventListener('change',updateChart);
        document.getElementById('hashFunction').addEventListener('change',updateChart);
        document.getElementById('downloadChartBtn').addEventListener('click',()=>{const chartCanvas=document.getElementById('benchmarkChart');const url=chartCanvas.toDataURL('image/png');const link=document.createElement('a');link.href=url;link.download=`grafico_benchmark_${new Date().getTime()}.png`;document.body.appendChild(link);link.click();document.body.removeChild(link)});
        window.addEventListener('load',updateChart);
    </script>
</body>
</html>